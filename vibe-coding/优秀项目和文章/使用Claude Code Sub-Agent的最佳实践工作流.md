# Vibe Coding - 优秀文章&项目部分

## 优秀文章&项目

### 使用Claude Code Sub-Agent的最佳实践工作流

这套方法的核心思想是：将自己定位为项目总监（CEO），将主Agent（Main Agent）作为你的项目经理或技术主管，而将Sub-Agent视为执行具体、细粒度任务的初级工程师。  
这种垂直化的管理模式能最大程度地发挥主Agent的规划编排能力和Sub-Agent的并发执行效率，同时有效规避Sub-Agent“脆皮”（即能力边界有限，容易出错）的特性。

#### 阶段一：奠定基础与规划（总监决策）

##### 明确核心目标与高级约束 (claude.md)

- **您的角色**：设定项目的最终目标、技术选型、关键架构决策和编码规范。
- **实践方法**：
  - 在项目根目录创建 `claude.md` 或 `.claude/doc` 目录。
  - 用自然语言写下：
    - 项目概述：要实现什么功能。
    - 技术栈：使用的语言、框架、库。
    - 核心原则：KISS原则、代码风格、错误处理策略等。
    - 禁止事项：不能使用的库、不能修改的文件。
- **目的**：此文档是项目“宪法”，为AI提供稳定、高级的上下文，避免方向偏移。

##### 授权主Agent进行项目调研

- **您的角色**：下达第一个指令。
- **实践方法**：
  - 指令示例：“开启UltraThink，首先阅读全部项目文档，尤其是 `.claude/doc` 下的内容。然后扫描整个代码库，理解结构与逻辑。”
- **目的**：让主Agent深入了解现状，便于后续拆解和分配任务。

#### 阶段二：任务分解与编排（项目经理履职）

##### 从宏观到微观的迭代式任务拆解

- **您的角色**：提出一个较大的需求，如“重构用户认证系统”。
- **主Agent角色**：拆解为详细、细小、可执行的计划。
- **实践方法**：
  - 指令示例：“请遵循KISS原则，为重构制定一个分批次执行计划，任务拆解到函数或模块级别。”
- **关键点**：
  - 任务要拆得足够细！
  - 好的任务例子：“为 `user.ts` 中的 `getUser` 函数增加 `email` 字段的返回”。

##### 动态生成Sub-Agent指令

- **主Agent角色**：
  - 将小任务包装成清晰的 Prompt，分配给Sub-Agent。
- **关键点**：
  - 指令应实时动态生成，具体到文件、函数、目标和参考代码。

#### 阶段三：并发执行与监控（工程师团队开工）

##### 安全第一：使用版本控制进行隔离

- **最佳实践**：强烈建议主Agent先 `git branch` 或 `git worktree` 创建新分支。
- **实践方法**：
  - 指令示例：“创建一个名为 `feat/refactor-auth-batch-1` 的新分支，所有Sub-Agent操作在此进行。”
- **目的**：隔离AI修改，避免污染主分支。

##### 启动并行的Sub-Agent

- **您的角色**：批准计划并下令执行。
- **实践方法**：
  - 指定并发数量：“你准备调用几批，每批多少个SubAgent？”
- **应用场景**：
  - 修复大量 lint 错误、代码替换、生成样板代码等任务。

##### 处理中断与错误

- **现实情况**：Sub-Agent可能中断。
- **实践方法**：
  - 示例指令：“第二批SubAgent中断了，重新启动5个，并检查当前任务完成情况后继续。”
- **目的**：建立具备恢复力的工作流。

#### 阶段四：评审、迭代与整合（质量控制与循环）

##### 评审工作成果

- **您的角色或主Agent角色**：
  - 检查新分支代码变更，如 `git diff`。
- **实践方法**：
  - 示例指令：“请总结修改并运行单元测试。”

##### 迭代优化下一批次

- **主Agent角色**：
  - 汇报结果并优化下一批次任务。
- **关键点**：
  - 示例：“第一批完成，确认大部分已实现，现在准备第二批。”

##### 合并与清理

- **您的角色**：决定是否合并主分支。
- **实践方法**：
  - `git merge` 或 `git rebase`
  - 临时Prompt用后即删，无需保留。

#### 核心要点总结 (TL;DR)

- **垂直管理模型**：你是CEO，主Agent是经理，Sub-Agent是员工。
- **文档先行**：`claude.md` 是AI活动的宪法。
- **极致拆解**：任务必须细到Sub-Agent能独立完成。
- **并发加速**：对重复任务使用并行Sub-Agent提升效率。
- **Git隔离**：永远在独立分支操作Sub-Agent。
- **动态指令**：主Agent需生成定制化指令。
- **迭代循环**：遵循“规划-执行-评审-优化”模式，允许失败。
- **从简到繁**：先做简单任务，逐步探索能力边界。